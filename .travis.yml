matrix:
  include:
    - os: linux
      jdk: oraclejdk8
      env: TARGET=nsis
      arch: amd64
    - os: linux
      jdk: openjdk11
      env: TARGET=nsis
      arch: amd64
    - os: linux
      jdk: oraclejdk8
      env: TARGET=makeself
      arch: amd64
    - os: linux
      jdk: openjdk11
      env: TARGET=makeself
      arch: amd64
    - os: linux
      jdk: openjdk11
      env: TARGET=makeself
      arch: arm64
    - os: osx
      env: TARGET=pkgbuild
      jdk: openjdk11
      osx_image: xcode12.2
      arch: amd64
    - os: osx
      env: TARGET="-Dtarget.arch=aarch64 pkgbuild"
      jdk: openjdk11
      osx_image: xcode12.3
      arch: amd64
language: java
dist: trusty
addons:
  homebrew:
    packages:
      - ant
  apt:
    packages:
      - ant
      - makeself
      - nsis
script: ant $TARGET
